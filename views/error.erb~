<%# ERB template for an error page modelled after the Sinatra standard error page %>
<html>
  <head>
    <title>
      <%= @error %>
    </title>
    <link type="text/css"
	  rel="stylesheet"
	  href="https://prod1.magtogo.com/library/jquery.mobile-1.4.2.min.css" />

    <script src="https://prod1.magtogo.com/library/jquery-1.11.1.min.js"></script>
    <script src="https://prod1.magtogo.com/library/jminit.js"></script>
    <script src="https://prod1.magtogo.com/library/jquery.mobile-1.4.2.min.js"></script>
    <link type="text/css"
	  rel ="stylesheet"
	  href="geo.css" />
  </head>
  <body style="font-family:Helvetica, sans-serif">
    <div style="color:#981919; font-size:36px; text-align:center">
      <%= @error %> <a onclick="$('#error_details').toggle()">More details</a>
    </div>
    <div id="error_details" style="display:none">
      <div style="float:left; padding-right:10px">
	<div style="font-size:24px">
	  Backtrace
	</div>
	<table style="table-layout:fixed">
	  <% @backtrace.each do |b| %>
	    <tr>
	      <td>
		<div>
		  <%= b[:file_base] %> line: <%= b[:line_num] %> <%= b[:routine] %> 
		</div>
	      </td>
	    </tr>
	  <% end %>
	</table>
      </div>
      <div style="float:right">
	<div style="font-size:24px">
	  Environment
	</div>
	<table style="table-layout:fixed; float:right">
	  <% @env.each do |k, v| %>
	    <tr>
	      <td>
		<%= k %>
	      </td>
	      <td>
		<div style='width:200px; overflow:hidden'>
		  <%= v %>
		</div>
	      </td>
	    </tr>
	  <% end %>
	</table>
      </div>
      <div style="clear:both">
    </div>
  </body>
</html>
